--- ports/sysdeps/unix/sysv/linux/hppa/bits/atomic.h	3 Dec 2006 23:03:20 -0000	1.3
+++ ports/sysdeps/unix/sysv/linux/hppa/bits/atomic.h	4 Apr 2008 18:57:47 -0000	1.4
@@ -76,7 +76,7 @@ typedef uintmax_t uatomic_max_t;
 	"stw	%%r28, %0			\n\t"			\
         "sub	%%r0, %%r21, %%r21		\n\t"			\
 	"stw	%%r21, %1			\n\t"			\
-	: "=m" (lws_ret), "=m" (lws_errno), "=m" (*mem)			\
+	: "=m" (lws_ret), "=m" (lws_errno), "+m" (*mem)			\
         : "r" (mem), "r" (oldval), "r" (newval)				\
 	: LWS_CLOBBER							\
      );									\
