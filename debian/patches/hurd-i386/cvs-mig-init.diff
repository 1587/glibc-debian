2008-03-04  Samuel Thibault  <samuel.thibault@ens-lyon.org>

	Mig supposes these to be initialized.
	* sysdeps/mach/hurd/recv.c (__recv): Initialize nports.
	* sysdeps/mach/hurd/recvfrom.c (__recvfrom): Likewise.
	* sysdeps/mach/hurd/recvmsg.c (__recvmsg): Likewise.
	* hurd/fd-read.c (_hurd_fd_read): Initialize nread.
	* hurd/get-host.c (_hurd_get_host_config): Likewise.
	* sysdeps/mach/hurd/dl-sysdep.c (__libc_read): Likewise.

Index: b/sysdeps/mach/hurd/recv.c
===================================================================
--- a/sysdeps/mach/hurd/recv.c	2005-02-22 23:51:00.000000000 +0100
+++ b/sysdeps/mach/hurd/recv.c	2008-08-08 18:37:57.000000000 +0200
@@ -38,7 +38,7 @@
   char *bufp = buf;
   mach_msg_type_number_t nread = n;
   mach_port_t *ports;
-  mach_msg_type_number_t nports;
+  mach_msg_type_number_t nports = 0;
   char *cdata = NULL;
   mach_msg_type_number_t clen = 0;
 
Index: b/sysdeps/mach/hurd/recvfrom.c
===================================================================
--- a/sysdeps/mach/hurd/recvfrom.c	2002-05-15 02:08:24.000000000 +0200
+++ b/sysdeps/mach/hurd/recvfrom.c	2008-08-08 18:37:57.000000000 +0200
@@ -41,7 +41,7 @@
   char *bufp = buf;
   mach_msg_type_number_t nread = n;
   mach_port_t *ports;
-  mach_msg_type_number_t nports;
+  mach_msg_type_number_t nports = 0;
   char *cdata = NULL;
   mach_msg_type_number_t clen = 0;
   struct sockaddr *addr = addrarg.__sockaddr__;
Index: b/sysdeps/mach/hurd/recvmsg.c
===================================================================
--- a/sysdeps/mach/hurd/recvmsg.c	2002-08-27 00:39:46.000000000 +0200
+++ b/sysdeps/mach/hurd/recvmsg.c	2008-08-08 18:37:57.000000000 +0200
@@ -34,7 +34,7 @@
   char *data = NULL;
   mach_msg_type_number_t len = 0;
   mach_port_t *ports;
-  mach_msg_type_number_t nports;
+  mach_msg_type_number_t nports = 0;
   char *cdata = NULL;
   mach_msg_type_number_t clen = 0;
   size_t amount;
Index: b/hurd/fd-read.c
===================================================================
--- a/hurd/fd-read.c	2002-06-12 01:03:16.000000000 +0200
+++ b/hurd/fd-read.c	2008-08-08 18:37:57.000000000 +0200
@@ -35,6 +35,7 @@
     }
 
   data = buf;
+  nread = *nbytes;
   if (err = HURD_FD_PORT_USE (fd, _hurd_ctty_input (port, ctty, readfd)))
     return err;
 
Index: b/hurd/get-host.c
===================================================================
--- a/hurd/get-host.c	2001-07-06 06:54:47.000000000 +0200
+++ b/hurd/get-host.c	2008-08-08 18:37:57.000000000 +0200
@@ -51,6 +51,7 @@
     }
 
   data = buf;
+  nread = buflen;
   err = __io_read (config, &data, &nread, -1, buflen);
   if (! err)
     /* Check if there is more in the file we didn't read.  */
Index: b/sysdeps/mach/hurd/dl-sysdep.c
===================================================================
--- a/sysdeps/mach/hurd/dl-sysdep.c	2004-09-06 23:31:38.000000000 +0200
+++ b/sysdeps/mach/hurd/dl-sysdep.c	2008-08-08 18:37:57.000000000 +0200
@@ -367,6 +367,7 @@
   mach_msg_type_number_t nread;
 
   data = buf;
+  nread = nbytes;
   err = __io_read ((mach_port_t) fd, &data, &nread, -1, nbytes);
   if (err)
     return __hurd_fail (err);
