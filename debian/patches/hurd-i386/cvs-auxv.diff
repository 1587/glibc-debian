commit 0cdc5e930a95ca2ec3f2fd9327da93a2fbaf8e97
Author: Samuel Thibault <samuel.thibault@ens-lyon.org>
Date:   Sun Apr 10 23:58:43 2016 +0200

    Fix crash on getauxval call without HAVE_AUX_VECTOR
    
    	* sysdeps/generic/ldsodefs.h (struct rtld_global_ro)
    	[!HAVE_AUX_VECTOR]: Do not define _dl_auxv field.
    	* misc/getauxval.c (__getauxval) [!HAVE_AUX_VECTOR]: Do not go through
    	GLRO(dl_auxv) list.

diff --git a/misc/getauxval.c b/misc/getauxval.c
index e48f40f..6111376 100644
--- a/misc/getauxval.c
+++ b/misc/getauxval.c
@@ -30,9 +30,11 @@ __getauxval (unsigned long int type)
   else if (type == AT_HWCAP2)
     return GLRO(dl_hwcap2);
 
+#ifdef HAVE_AUX_VECTOR
   for (p = GLRO(dl_auxv); p->a_type != AT_NULL; p++)
     if (p->a_type == type)
       return p->a_un.a_val;
+#endif
 
   __set_errno (ENOENT);
   return 0;
diff --git a/sysdeps/generic/ldsodefs.h b/sysdeps/generic/ldsodefs.h
index 2733ac8..ddec0be 100644
--- a/sysdeps/generic/ldsodefs.h
+++ b/sysdeps/generic/ldsodefs.h
@@ -509,8 +509,10 @@ struct rtld_global_ro
   /* Mask for important hardware capabilities we honour. */
   EXTERN uint64_t _dl_hwcap_mask;
 
+#ifdef HAVE_AUX_VECTOR
   /* Pointer to the auxv list supplied to the program at startup.  */
   EXTERN ElfW(auxv_t) *_dl_auxv;
+#endif
 
   /* Get architecture specific definitions.  */
 #define PROCINFO_DECL
