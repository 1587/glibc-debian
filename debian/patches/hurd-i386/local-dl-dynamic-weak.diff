Index: b/elf/dl-support.c
===================================================================
--- a/elf/dl-support.c	2008-08-08 19:08:25.000000000 +0200
+++ b/elf/dl-support.c	2008-08-08 19:08:50.000000000 +0200
@@ -43,7 +43,13 @@
 int _dl_debug_mask;
 int _dl_lazy;
 ElfW(Addr) _dl_use_load_bias = -2;
+#ifdef __GNU__
+/* GNU/Hurd needs this because otherwise libpthread's pthread_mutex_lock gets
+ * overridden by libX11's stubs.  */
+int _dl_dynamic_weak = 1;
+#else
 int _dl_dynamic_weak;
+#endif
 
 /* If nonzero print warnings about problematic situations.  */
 int _dl_verbose;
Index: b/elf/rtld.c
===================================================================
--- a/elf/rtld.c	2008-08-08 19:08:49.000000000 +0200
+++ b/elf/rtld.c	2008-08-08 19:08:50.000000000 +0200
@@ -145,6 +145,11 @@
 #ifdef NEED_DL_SYSINFO
     ._dl_sysinfo = DL_SYSINFO_DEFAULT,
 #endif
+#ifdef __GNU__
+/* GNU/Hurd needs this because otherwise libpthread's pthread_mutex_lock gets
+ *  * overridden by libX11's stubs.  */
+    ._dl_dynamic_weak = 1,
+#endif
     ._dl_debug_fd = STDERR_FILENO,
     ._dl_use_load_bias = -2,
     ._dl_correct_cache_id = _DL_CACHE_DEFAULT_ID,
